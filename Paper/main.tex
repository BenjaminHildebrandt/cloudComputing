\documentclass[english]{lni}

\usepackage{url}
\usepackage{hyperref}
\usepackage[utf8]{inputenc}
\usepackage{nameref}
\usepackage{graphicx}
\usepackage{tabularx}

%nothing works related to colored tables
%\PassOptionsToPackage[table]{xcolor}
\usepackage{lscape}
%\usepackage[table]{xcolor}  % https://tex.stackexchange.com/questions/83101/option-clash-for-package-xcolor
%\usepackage{xcolor}
\usepackage{array}   % table col width in tabular {}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}

% \addbibresource{mybibfile}    % lni.dtx  Z.615ff

\begin{document}
%\title[Cloud Computing: SciTube] {A scientific Video-on-Demand-Solution powered by Microsoft Azure}
\title{Cloud Computing: SciTube}
\subtitle{A scientific Video-on-Demand-Solution powered by Microsoft Azure}
\author[Markus Herche \and Benjamin Hildebrandt]
{Markus Herche\footnote{Hochschule Fulda, Dept. of Computer Science, Leipziger Straße 123, 36037 Fulda,
Germany \email{markus.j.herche@cs.hs-fulda.de}} \and
Benjamin Hildebrandt\footnote{Hochschule Fulda, Dept. of Computer Science, Leipziger Straße 123, 36037 Fulda,
Germany
\email{benjamin.hildebrandt@cs.hs-fulda.de}}}

\booktitle{Cloud Computing} % Name of book title
\editor{Markus Herche \& Benjamin Hildebrandt} % Names of Editors
\booktitle{SciTube} % Name of book title
\year{2018-2019}


\maketitle

\begin{abstract}
    The saying goes that a picture says more than a thousand words. This should apply to scientific papers as well,
    because why describe e.g. the deformation of a curve, when that can just be shown in a quick video. The following 
    paper outlines a basic cloud-based video-on-demand-solution with a pay-per-view-model. 
\end{abstract}

Note: This project made possible through the Microsoft Azure Academic Program.

\section{Prerequisites and Scenario}
Verlage wollen Geld, Autoren wollen Geld, wir wollen Geld für die Serverkosten\\

Ohne Geld nur Preview, Live-Streaming von Konferenzen und Keynotes, billiger als Ticket + Reise\\

Users can publish Videos and talks and cut out a preview for all users, which together with video ratings should make it easier to decide if you should pay
They can also decide to make it free for everyone, which introduces ads to at least cover our costs\\

Ähnlich Stack Overflow etc: Community-Moderation durch ausgewiesene Fachkräfte, die Reputation sammeln können
(zb: Interessierte Profs und Doktoren melden sich mit Nachweis an, erhalten direkt +100 Reputation in ihrem Fachgebiet)

\section{Microsoft Azure Fundamentals}
Application consists of multiple \glqq building blocks\grqq that can be managed individually.
They belong to a resource group.
Configuring can be done via GUI in any Webbrowser or via Azure CLI scripts
Those can be exported from the GUI for easy reuse, minimizing the risk of missing a checkbox or a specific option

\section{Our Implementation}
Follows the proposed architecture from Microsoft themselves, then again, what else would you add for VOD.
\begin{itemize}
    \item BlobStorage
    \item AppService
    \item Streaming Endpoint
    \item Azure Media Services: Encoding and DRM
\end{itemize}

Using Media Services results in a \textit{two-tier} server-architecture, in which the NodeJS-powered AppService has the end-user's devices
as clients. The webserver itself is a client to the Azure Media Services Backend, requesting Encoding- and Streaming-Tasks by
submitting \textit{Jobs}. This is also for security reasons, as Media Services uses a separate account-system with it's own credentials, 
generated by Microsoft.
Those are confidential and must not be exposed to end-users.

\section{Evaluation of cloud criteria}
As defined by the US-based \textit{National Institute of Standards and Technology} (NIST) a cloud service must fulfill
certain criteria \cite{nistCloud}. This section gives a brief overview and reviews the application's fulfillment of each.
\begin{itemize}
    \item \textbf{On-Demand Self Service:}
    \item \textbf{Broad Network Access:}
    \item \textbf{Resource Pooling:}
    \item \textbf{Rapid Elasticity:} illusion of infinite resources \& scaling: provided by Azure as far as end users are concerned because everyone demands it. so MS has a trained 
    crew steadily working to administrate farms\\
    autoscaling however is only horizontally (more/less instances of the same resource). Vertical scaling (more powerful versions of instances) requires manual action, especially because the shift in price between tiers can be dramatic.
    \item \textbf{Measured Services:} provided by azure: Insights and Billing, Alerts
\end{itemize}

\section{Financing}
Tabelle mit der Kostenaufstellung von Azure, skalierbare Elemente
in versch. Tiern, also am Anfang nur 100GB BlobStorage, später 1TB, dann 10TB
Kosten am Anfang (Tier 1): ca. 40 Euro im Monat, also mit einem Hartz4-Satz fast ein Jahr lang bezahlbar
Das teuerste ist anfangs der AppService
Finanzierung wird erst ein Problem, wenn viel mehr Content und Traffic anfallen
Using CDN is preferable, because ``When Azure CDN is not enabled for Media Services, data transfer is charged at Data Transfer Pricing. When Azure CDN is enabled for Streaming Units, data transfer charges do not apply. Data transferred is instead just charged at standard CDN pricing.'' 
% https://azure.microsoft.com/en-us/pricing/details/cdn/   vs   https://azure.microsoft.com/en-us/pricing/details/bandwidth/
While at first the pricing for both is near identical, it's the range from the 50th on to the 150th TB in one month that already shows the disparity: \$0.07 per GB through standard file transfer vs  \$0.0037 via CDN.

According to an online filesize calculator\footnote{https://toolstud.io/video/filesize.php?imagewidth=1920&imageheight=1080&framerate=25&timeduration=60&timeunit=minutes} a 25 FPS FullHD-Video of 20 minutes length would estimate to around 1 GB in size (average between \textit{YoutubeHD} and \textit{NetflixHD} with a necessary bandwidth of 8Mbps (1MB/s) in case of \textit{YoutubeHD} bitrate. 
Assume that after a good start there are now 100 videos as the one described before. A total of 500 visitors arrive each month and watch 2 videos each: $(500 \ast 2 GB) = 1TB$ Streaming Throughput and $(500 \ast 2 \ast 20 min)  = 2000$ minutes (33,33 hours) of streamed video. (1000GB * 0,08ct) = 80 dolurs
The necessary blob storage amounts to $100 \ast 1GB = 100GB$. 
Let's also assume we receive 10 new videos each month, which results in an encoding output of $(10 \ast 20 mins) = 200$ minutes (6.75 dolurs).  

This brings us to a rough estimate (appsrv+streaming + encoding + storage) of 130 dolls each month. Spreading the costs to the users means every user uses services worth (130 / 500) = 0,26ct. If we omit the costs for the AppService and only account for costs generated through user interaction we get (90 / 500) = 0,18ct per user. The AppService is a mostly fixed cost as it is billed per running time, but media services costs scale upwards with user interaction.

Kosten: 80/20 Creator / SciTube
Every encoding costs: Length * BasePriceHD
Every view costs: $VideoSize * (Streaming+CDN)$
Every vid costs: $Size * StoragePrice$
Every month costs: $AppServiceBasePrice * Throughput$

\section{Future Work}
CDN can be deployed and used easily but is not really needed right now. 
Scaling needs to be tested under real conditions (1000 -> 100000 Users), but only bc we need to know what to configure
Can assume that it works from a technical standpoint, as MS has way more experience
    
\newpage
\appendix

\input{table_extimate_tier1_no_colors}
\input{table_extimate_tier1_2}
\bibliography{mybibfile}

\end{document}
